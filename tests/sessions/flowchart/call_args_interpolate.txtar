meow, world! meow, earth! meow, hadera!

-- main.flowchart.yaml main --
version: v1

imports:
  - name: foo
    path: "foo.star"

nodes:
  - name: main
    result: "meow"
    goto: nodes.print1

  - name: print1
    action:
      call:
        target: imports.foo.say
        args:
          sound: ^p^{{ states.nodes.main }}, world!
    goto: nodes.print2

  - name: print2
    action:
      call:
        target: imports.foo.pick
        args:
          sounds:
            moo: ^go^{{ .states.nodes.main }}, earth!
          i: moo
    goto: nodes.print3

  - name: print3
    action:
      call:
        target: imports.foo.pick
        args:
          sounds:
            - ^^ states.nodes.main + ", hadera!"
          i: 0
    goto: nodes.end

  - name: end
    action:
      print:
        value: ^p^ {{ states.nodes.print1 }} {{ states.nodes.print2 }} {{ states.nodes.print3 }}

-- foo.star --
def say(sound):
  return sound

def pick(sounds, i):
  return sounds[i]
